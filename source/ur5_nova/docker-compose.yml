version: '3.8'
services:
  ur5:
    build:
      context: .
      dockerfile: Dockerfile
    image: ur5_push_t:humble-fixed
    container_name: ur5_push_t
    network_mode: host
    environment:
      - ROS_DOMAIN_ID=0
      - RMW_IMPLEMENTATION=rmw_cyclonedds_cpp
      - OMNI_FETCH_ASSETS=1
      # Toggle model control mode to twist by default
      - CONTROL_MODE=twist
      - DISPLAY=${DISPLAY}
    volumes:
      - ./:/ws:rw
      - /tmp/.X11-unix:/tmp/.X11-unix:rw
    command: bash -lc "python3 /ws/Scripts/data_collection_Model.py --ros-args -p control_mode:=${CONTROL_MODE} -p hz:=30"

